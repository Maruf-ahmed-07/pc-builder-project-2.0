.chat-widget { position: fixed; bottom: 28px; right: 28px; z-index: 1220; font-family: 'Inter', system-ui, sans-serif; }
.chat-toggle { position:relative; background:linear-gradient(135deg,#2563eb,#7c3aed); color:#fff; border:none; padding:18px 26px; border-radius:38px; cursor:pointer; box-shadow:0 8px 22px -6px rgba(0,0,0,0.35); font-size:18px; display:flex; align-items:center; gap:10px; font-weight:600; letter-spacing:0.5px; transition:transform .2s, box-shadow .2s; }
.chat-toggle:hover { transform:translateY(-3px); box-shadow:0 12px 28px -6px rgba(0,0,0,0.45); }
.chat-toggle .icon { font-size:24px; }
.chat-toggle .badge { position:absolute; top:-6px; right:-6px; background:#ef4444; color:#fff; font-size:12px; padding:4px 8px; border-radius:16px; box-shadow:0 2px 6px rgba(0,0,0,0.3); }

.chat-window { width:380px; max-width:90vw; height:520px; background:linear-gradient(180deg,#ffffff,#f1f5f9); border-radius:24px; box-shadow:0 20px 48px -12px rgba(0,0,0,0.35), 0 4px 12px rgba(0,0,0,0.15); display:flex; flex-direction:column; overflow:hidden; animation:popIn .35s cubic-bezier(.16,.8,.43,1); border:1px solid #e2e8f0; backdrop-filter:blur(6px); }
@keyframes popIn { from { opacity:0; transform:translateY(16px) scale(.96);} to { opacity:1; transform:translateY(0) scale(1);} }
.chat-header { background:linear-gradient(135deg,#2563eb,#7c3aed); color:#fff; padding:14px 18px; display:flex; justify-content:space-between; align-items:center; font-weight:600; font-size:16px; letter-spacing:.5px; box-shadow:0 2px 8px rgba(0,0,0,0.25); }
.chat-header.ai-mode { background:linear-gradient(135deg,#0f766e,#115e59); }
.chat-header button { background:rgba(255,255,255,0.15); border:none; color:#fff; font-size:22px; cursor:pointer; width:34px; height:34px; line-height:34px; border-radius:12px; display:flex; align-items:center; justify-content:center; transition:background .2s; }
.chat-header button:hover { background:rgba(255,255,255,0.3); }
.chat-header .dot { width:10px; height:10px; display:inline-block; border-radius:50%; margin-left:8px; box-shadow:0 0 0 3px rgba(255,255,255,0.2); }
.chat-header .dot.online { background:#34d399; }
.chat-header .dot.offline { background:#f87171; }

.chat-messages { flex:1; padding:18px 16px 12px; overflow-y:auto; background:linear-gradient(180deg,#f8fafc,#eef2f7); position:relative; }
.chat-messages:after { content:""; position:absolute; inset:0; background:radial-gradient(circle at 85% 15%, rgba(124,58,237,0.06), transparent 60%); pointer-events:none; }
.chat-msg { display:flex; margin-bottom:14px; }
.chat-msg.me { justify-content:flex-end; }
.chat-msg .bubble { max-width:72%; padding:12px 16px 14px; border-radius:20px; font-size:15px; line-height:1.35; position:relative; word-break:break-word; letter-spacing:.2px; backdrop-filter:blur(4px); }
.chat-msg.me .bubble { background:linear-gradient(135deg,#2563eb,#5b21b6); color:#fff; box-shadow:0 4px 12px -4px rgba(37,99,235,0.5); border-bottom-right-radius:6px; }
.chat-msg.admin .bubble { background:#ffffff; border:1px solid #e2e8f0; color:#1e293b; border-bottom-left-radius:6px; box-shadow:0 4px 10px -6px rgba(0,0,0,0.25); }
.chat-msg.ai .bubble { background:linear-gradient(135deg,#0f766e,#115e59); color:#ecfdf5; border-bottom-left-radius:6px; box-shadow:0 4px 12px -6px rgba(15,118,110,0.5); font-family: 'Inter', system-ui, sans-serif; }
.chat-msg.system { justify-content:center; }
.chat-msg .bubble.system { background:#f1f5f9; border:1px dashed #94a3b8; color:#475569; font-size:12px; text-align:center; padding:10px 14px; box-shadow:none; }
.chat-msg .bubble.typing { display:inline-flex; gap:6px; align-items:center; justify-content:center; min-width:52px; }
.chat-msg .bubble.typing span { width:8px; height:8px; background:#cbd5e1; border-radius:50%; animation:blink 1.2s infinite ease-in-out; }
.chat-msg .bubble.typing .dot1 { animation-delay:0s; }
.chat-msg .bubble.typing .dot2 { animation-delay:.2s; }
.chat-msg .bubble.typing .dot3 { animation-delay:.4s; }
@keyframes blink { 0%,80%,100% { opacity:.2; transform:translateY(0);} 40% { opacity:1; transform:translateY(-3px);} }

.chat-input { display:flex; gap:10px; padding:12px 14px 16px; background:rgba(255,255,255,0.9); border-top:1px solid #e2e8f0; backdrop-filter:blur(10px); }
.chat-input input { flex:1; border:1px solid #cbd5e1; background:#f8fafc; padding:12px 14px; font-size:14px; outline:none; border-radius:14px; transition:border .2s, background .2s; }
.chat-input input:focus { border-color:#6366f1; background:#fff; }
.chat-input button { background:linear-gradient(135deg,#2563eb,#7c3aed); border:none; color:#fff; padding:0 20px; cursor:pointer; border-radius:14px; font-size:16px; font-weight:600; box-shadow:0 4px 12px -4px rgba(67,56,202,0.55); transition:transform .18s, box-shadow .18s, filter .18s; }
.chat-input .mode-btn { background:#334155; font-size:12px; font-weight:600; padding:0 12px; margin-right:4px; box-shadow:none; border-radius:12px; letter-spacing:.5px; }
.chat-input .mode-btn.on { background:#059669; }
.chat-input .mode-btn:hover:not(:disabled) { transform:none; filter:brightness(1.1); }
.chat-input button:hover:not(:disabled) { transform:translateY(-2px); box-shadow:0 6px 16px -4px rgba(67,56,202,0.6); filter:brightness(1.05); }
.chat-input button:disabled { opacity:.5; cursor:not-allowed; }

@media (max-width: 768px) {
  .chat-widget {
    bottom: 20px;
    right: 20px;
  }
  
  .chat-toggle {
    padding: 16px 20px;
    font-size: 16px;
    border-radius: 32px;
  }
  
  .chat-toggle .icon {
    font-size: 20px;
  }
  
  .chat-window {
    width: calc(100vw - 32px);
    height: 480px;
    max-width: 360px;
  }
  
  .chat-header {
    padding: 16px;
    font-size: 15px;
  }
  
  .chat-messages {
    padding: 16px 14px 10px;
  }
  
  .chat-msg .bubble {
    max-width: 80%;
    font-size: 14px;
    padding: 11px 14px 12px;
  }
  
  .chat-input {
    padding: 12px;
    gap: 8px;
  }
  
  .chat-input input {
    padding: 11px 12px;
    font-size: 14px;
  }
  
  .chat-input button {
    padding: 0 16px;
    font-size: 14px;
  }
  
  .chat-input .mode-btn {
    padding: 0 10px;
    font-size: 11px;
  }
}

@media (max-width: 640px) {
  .chat-widget {
    bottom: 16px;
    right: 16px;
  }
  
  .chat-toggle {
    padding: 14px 18px;
    font-size: 15px;
    border-radius: 28px;
  }
  
  .chat-window {
    width: calc(100vw - 24px);
    height: 450px;
    max-width: 340px;
    border-radius: 20px;
  }
  
  .chat-header {
    padding: 14px;
    font-size: 14px;
  }
  
  .chat-header button {
    width: 30px;
    height: 30px;
    font-size: 18px;
  }
  
  .chat-messages {
    padding: 14px 12px 8px;
  }
  
  .chat-msg .bubble {
    max-width: 85%;
    font-size: 13px;
    padding: 10px 12px 11px;
    border-radius: 16px;
  }
  
  .chat-msg.me .bubble {
    border-bottom-right-radius: 4px;
  }
  
  .chat-msg.admin .bubble,
  .chat-msg.ai .bubble {
    border-bottom-left-radius: 4px;
  }
  
  .chat-input {
    padding: 10px;
    gap: 6px;
  }
  
  .chat-input input {
    padding: 10px 11px;
    font-size: 13px;
    border-radius: 12px;
  }
  
  .chat-input button {
    padding: 0 14px;
    font-size: 13px;
    border-radius: 12px;
  }
  
  .chat-input .mode-btn {
    padding: 0 8px;
    font-size: 10px;
    border-radius: 10px;
  }
}

@media (max-width: 480px) {
  .chat-widget {
    bottom: 12px;
    right: 12px;
    left: 12px;
  }
  
  .chat-toggle {
    padding: 14px 16px;
    font-size: 14px;
    width: 100%;
    max-width: 200px;
    margin: 0 auto;
    justify-content: center;
  }
  
  .chat-window {
    width: 100%;
    height: calc(100vh - 100px);
    max-height: 500px;
    border-radius: 18px;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 12px;
    width: calc(100% - 24px);
  }
  
  .chat-header {
    padding: 12px 14px;
    font-size: 14px;
  }
  
  .chat-header button {
    width: 28px;
    height: 28px;
    font-size: 16px;
    border-radius: 10px;
  }
  
  .chat-messages {
    padding: 12px 10px 6px;
  }
  
  .chat-msg {
    margin-bottom: 12px;
  }
  
  .chat-msg .bubble {
    max-width: 90%;
    font-size: 13px;
    padding: 9px 11px 10px;
    border-radius: 14px;
    line-height: 1.4;
  }
  
  .chat-msg.me .bubble {
    border-bottom-right-radius: 3px;
  }
  
  .chat-msg.admin .bubble,
  .chat-msg.ai .bubble {
    border-bottom-left-radius: 3px;
  }
  
  .chat-msg .bubble.system {
    font-size: 11px;
    padding: 8px 10px;
  }
  
  .chat-input {
    padding: 8px 10px 12px;
    gap: 6px;
  }
  
  .chat-input input {
    padding: 10px;
    font-size: 13px;
    border-radius: 10px;
    min-height: 40px;
  }
  
  .chat-input button {
    padding: 0 12px;
    font-size: 12px;
    border-radius: 10px;
    min-height: 40px;
    min-width: 50px;
  }
  
  .chat-input .mode-btn {
    padding: 0 8px;
    font-size: 9px;
    border-radius: 8px;
    min-height: 32px;
    margin-right: 2px;
  }
}

/* Touch improvements */
@media (hover: none) and (pointer: coarse) {
  .chat-toggle:hover {
    transform: none;
  }
  
  .chat-header button:hover {
    background: rgba(255,255,255,0.15);
  }
  
  .chat-input button:hover {
    transform: none;
    filter: none;
  }
  
  .chat-input .mode-btn:hover {
    transform: none;
    filter: brightness(1);
  }
  
  /* Ensure touch targets are large enough */
  .chat-toggle,
  .chat-header button,
  .chat-input button,
  .chat-input .mode-btn {
    min-height: 44px;
  }
  
  .chat-input input {
    min-height: 44px;
  }
}

/* Very small screens */
@media (max-width: 360px) {
  .chat-widget {
    bottom: 8px;
    right: 8px;
    left: 8px;
  }
  
  .chat-toggle {
    padding: 12px 14px;
    font-size: 13px;
    max-width: 180px;
  }
  
  .chat-window {
    margin: 8px;
    width: calc(100% - 16px);
    height: calc(100vh - 80px);
    border-radius: 16px;
  }
  
  .chat-header {
    padding: 10px 12px;
    font-size: 13px;
  }
  
  .chat-messages {
    padding: 10px 8px 4px;
  }
  
  .chat-msg .bubble {
    font-size: 12px;
    padding: 8px 10px 9px;
    border-radius: 12px;
  }
  
  .chat-input {
    padding: 6px 8px 10px;
  }
  
  .chat-input input {
    padding: 9px;
    font-size: 12px;
  }
  
  .chat-input button {
    padding: 0 10px;
    font-size: 11px;
    min-width: 45px;
  }
  
  .chat-input .mode-btn {
    padding: 0 6px;
    font-size: 8px;
    min-height: 30px;
  }
}

/* Landscape phone adjustments */
@media (max-width: 896px) and (orientation: landscape) and (max-height: 500px) {
  .chat-window {
    height: calc(100vh - 60px);
    max-height: 400px;
  }
  
  .chat-header {
    padding: 8px 12px;
  }
  
  .chat-messages {
    padding: 8px 10px 4px;
  }
  
  .chat-input {
    padding: 6px 8px 8px;
  }
}
